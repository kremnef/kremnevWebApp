<?xml version="1.0"?>

<jx:template xmlns:jx="http://apache.org/cocoon/templates/jx/1.0"
             xmlns:ft="http://apache.org/cocoon/forms/1.0#template"
             xmlns:fi="http://apache.org/cocoon/forms/1.0#instance"
             xmlns:i18n="http://apache.org/cocoon/i18n/2.1">
    <!--<jx:import uri="servlet:forms:/resource/internal/generation/jx-macros.xml"/>-->
    <jx:import uri="context:/DocumentType/forms/Common/template.xml"/>

    <!--<content>-->
    <!--<userDataMacro/>-->
    <!--<parentObjects />-->
    <ft:form-template id="dynamicForm" location="${cocoon.request.getAttribute('dynamicForm')}"
                      ajax-action="${cocoon.session.getAttribute('dynamicForm.id')}.continue"
                      action="${cocoon.session.getAttribute('dynamicForm.id')}.continue" method="POST" ajax="false">
        <!--<script type="text/javascript">

            function openFileDialog() {
            $("#fileTree:ui-dialog").dialog("destroy");
            $("#fileTree").dialog({
            width: 800,
            modal: true,
            buttons: {
            "<i18n:text key="Save"/>": function() {
            $(this).dialog("close");
            }
            }
            });


            var divId2 = "#fileTree";
            var entity2 = "Folder";
            var ajaxUrl2 = "/ems/core/treeObjects?entity=" + entity2;

            document.getElementById('parentTreeRootNode').value = 0;
            document.getElementById('parentTreeRootNode').innerHTML = entity2;
            initXmlTree(divId2, ajaxUrl2);

            $("#fileTree").click(function (e) {
            var f = jQuery.jstree._focused();
            var id = f.data.ui.selected.attr("id");
            var name = f.data.ui.selected.attr("name");
            var imagePath = f.data.ui.selected.attr("path");
            //var systemName = f.data.ui.selected.attr("systemName");
            document.forms['dynamicForm'].elements['PressRelease.image'].value = imagePath;
            //document.forms['dynamicForm'].elements['PressRelease.imagePreview'].src = systemName+'.png';
            });
            };
        </script>
        <div i18n:attr="title" title="core:FileObject.choose" id="fileTreeContainer" class="dialogContent">
            <div class="common-div">
                <span class="ui-icon-home"></span>
                <a id="parentTreeRootNode" href="#" class=""></a>
            </div>
            <div id="fileTree"></div>
        </div>-->
        <!--<select id="chooseRegion" onChange="if(this.value!=0){addTag(this.options[this.selectedIndex].id, this.value, 0)}">-->
        <select id="chooseRegion" onChange="if(this.value!=0){addTag(this.value)}">
            <option value="0">--</option>
            <option value="Ярославское ГУ">Ярославское ГУ</option>
            <option value="Костромское ГУ">Костромское ГУ</option>
            <option value="Новгородское ГУ">Новгородское ГУ</option>
            <option value="Вологодское ГУ">Вологодское ГУ</option>
            <option value="Тверское ГУ">Тверское ГУ</option>
            <option value="Архангельское ГУ">Архангельское ГУ</option>
            <option value="Главное ГУ">Главное ГУ</option>
        </select>

        <input type="checkbox" id="tagMAIN" name="MAIN" value="MAIN" selected="false" onClick="addTag(this.value)"></input>
        <label for="tagMAIN">MAIN</label>
        <input type="checkbox" id="tagIR" name="IR" value="IR" selected="false" onClick="addTag(this.value)"></input>
        <label for="tagIR">IR</label>
        <ft:group id="PressRelease">
            <fi:group>
                <fi:styling layout="columns"/>
                <fi:items>
                    <!-- <ft:widget-label id="image"/>
             <ft:widget id="image">
                 <fi:styling size="50"/>
             </ft:widget>
             <input type="button" value="Choose" i18n:attr="value"
                    onclick="openFileDialog('#fileTreeContainer')"/>-->

                    <!--<img src="" id="imagePreview"/>-->


                    <!-- <ft:widget id="title">
                        <fi:styling size="50"/>
                    </ft:widget>-->
                    <script language="javascript">
                        function setImagePath(imagePath, functionNumber) {
                        CKEDITOR.tools.callFunction(functionNumber, imagePath);
                        }
                    </script>
                    <ft:widget id="text">
                        <fi:styling size="100" type="ckeditor"/>
                    </ft:widget>

                    <!-- <ft:widget id="text">
                        <fi:styling size="100" type="HTML-editor"/>
                    </ft:widget>-->
                    <ft:widget id="contacts">
                        <fi:styling size="50" rows="5" type="textarea"/>
                    </ft:widget>
                    <ft:widget id="information">
                        <fi:styling size="100" rows="8" type="textarea"/>
                    </ft:widget>

                </fi:items>
            </fi:group>
        </ft:group>
        <ft:widget id="saveDocumentType" class="button-primary">
            <fi:styling type="hidden"/>
        </ft:widget>
    </ft:form-template>

    <!--</content>-->
</jx:template>